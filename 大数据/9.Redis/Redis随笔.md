问题：IO多路复用



问题：讲的时候建一内存设置为机器的3/4，那在做RDB备份fork一个子进程的时候，内存不是扩大一倍吗？





**问题：Redis的客户端在执行multi后，再放入数据，会把数据放到命令队列，这个队列在客户端还是在服务器端？还是说客户端和服务端的都有一个队列，如果服务端也有一个队列，这个队列和管道有什么区别？**

老师讲的是客户端，网上说的是服务端。的确是客户端

![image-20200805155926608](/Users/baiwang/Desktop/大数据笔记/9.Redis/图片/证实事务队列在客户端还是服务端.png)

- pipeline选择客户端缓冲，multi选择服务端缓冲；
- 请求次数的不一致，multi需要每个命令都发送一次给服务端，pipeline最后一次性发送给服务端，请求次数相对于multi减少
- multi/exec可以保证原子性，而pipeline不保证原子性

问题：watch 一个key 的时候，到底监控的这个key的什么变化？因为在另一个客户端set key 的值为原值的时候，exec执行还是nil

不是根据value值变化判断的，是他存储了watch的机器，有其他机器对watch中的key做修改，会修改watch机器的flag，然后watch的那台机器执行exec时候会提前判断自己的flag，如果发现flag变了说明有其他机器修改过



问题：使用lua脚本做分布式锁的时候能够解决重复获取锁的问题吗？感觉lua脚本命令只是实现的命令的原子性，但是并没有解决强一致性。Redisson的实现只是解决的锁的重入以及续租。



问题：SDS扩容

